<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessibility Test - LeetCode Company Problems</title>

    <!-- CSS Files -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/accessibility.css">

    <style>
        .test-section {
            margin: 2rem 0;
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
        }

        .test-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .test-item {
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            background-color: var(--surface-color);
        }

        .keyboard-shortcuts {
            background-color: var(--surface-color);
            padding: 1rem;
            border-radius: var(--radius-md);
            margin: 1rem 0;
        }

        .keyboard-shortcuts h3 {
            margin-bottom: 0.5rem;
        }

        .keyboard-shortcuts ul {
            list-style: none;
            padding: 0;
        }

        .keyboard-shortcuts li {
            margin: 0.25rem 0;
            font-family: monospace;
        }

        .keyboard-shortcuts kbd {
            background-color: var(--border-color);
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }

        .contrast-test {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin: 1rem 0;
        }

        .contrast-sample {
            padding: 1rem;
            border-radius: var(--radius-md);
            min-width: 150px;
            text-align: center;
            font-weight: 500;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 0.5rem;
        }

        .status-pass {
            background-color: var(--success-color);
        }

        .status-fail {
            background-color: var(--error-color);
        }

        .status-warning {
            background-color: var(--warning-color);
        }
    </style>
</head>

<body>
    <div class="container">
        <header style="text-align: center; margin: 2rem 0;">
            <h1>Accessibility Features Test</h1>
            <p>Test all accessibility features including keyboard navigation, focus management, and ARIA support</p>

            <!-- Theme Toggle for Testing -->
            <button class="theme-toggle" aria-label="Toggle theme" style="margin: 1rem;">
                <svg class="theme-icon theme-icon-light" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="5"></circle>
                    <line x1="12" y1="1" x2="12" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="23"></line>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                    <line x1="1" y1="12" x2="3" y2="12"></line>
                    <line x1="21" y1="12" x2="23" y2="12"></line>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                </svg>
                <svg class="theme-icon theme-icon-dark" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
            </button>
        </header>

        <!-- Keyboard Navigation Test -->
        <section class="test-section">
            <h2 class="test-title">1. Keyboard Navigation Test</h2>
            <div class="keyboard-shortcuts">
                <h3>Available Keyboard Shortcuts:</h3>
                <ul>
                    <li><kbd>/</kbd> - Focus search bar</li>
                    <li><kbd>Escape</kbd> - Clear search or go back</li>
                    <li><kbd>Tab</kbd> / <kbd>Shift+Tab</kbd> - Navigate between elements</li>
                    <li><kbd>Arrow Keys</kbd> - Navigate within grids</li>
                    <li><kbd>Enter</kbd> / <kbd>Space</kbd> - Activate buttons and links</li>
                    <li><kbd>Home</kbd> / <kbd>End</kbd> - Jump to first/last item in grid</li>
                    <li><kbd>Alt+1</kbd> - Go to home</li>
                    <li><kbd>Alt+2</kbd> - Go to favorites</li>
                    <li><kbd>Alt+3</kbd> - Focus search</li>
                    <li><kbd>Alt+4</kbd> - Toggle theme</li>
                </ul>
            </div>

            <!-- Search Bar Test -->
            <div class="search-container" style="max-width: 400px; margin: 1rem 0;">
                <input type="search" id="search-input" class="search-input" placeholder="Test search (press / to focus)"
                    aria-label="Search test">
                <button class="search-clear" aria-label="Clear search" style="display: none;">×</button>
            </div>
        </section>

        <!-- Focus Management Test -->
        <section class="test-section">
            <h2 class="test-title">2. Focus Management Test</h2>
            <p>Tab through these elements to test focus indicators:</p>

            <div class="test-grid">
                <button class="btn btn-primary">Primary Button</button>
                <button class="btn btn-secondary">Secondary Button</button>
                <a href="#test" class="btn">Link Button</a>
                <button class="filter-btn active" aria-pressed="true">Active Filter</button>
                <button class="filter-btn" aria-pressed="false">Inactive Filter</button>
            </div>
        </section>

        <!-- Grid Navigation Test -->
        <section class="test-section">
            <h2 class="test-title">3. Grid Navigation Test</h2>
            <p>Use arrow keys to navigate within this grid:</p>

            <div class="companies-grid" role="grid" aria-label="Test company grid"
                style="grid-template-columns: repeat(3, 1fr);">
                <div class="company-card" role="button" tabindex="0" aria-label="Test Company 1">
                    <div class="company-header">
                        <div class="company-logo">TC</div>
                        <h3 class="company-name">Test Company 1</h3>
                    </div>
                    <div class="company-stats">
                        <div class="company-problem-count">50 problems</div>
                    </div>
                </div>

                <div class="company-card" role="button" tabindex="0" aria-label="Test Company 2">
                    <div class="company-header">
                        <div class="company-logo">TC</div>
                        <h3 class="company-name">Test Company 2</h3>
                    </div>
                    <div class="company-stats">
                        <div class="company-problem-count">75 problems</div>
                    </div>
                </div>

                <div class="company-card" role="button" tabindex="0" aria-label="Test Company 3">
                    <div class="company-header">
                        <div class="company-logo">TC</div>
                        <h3 class="company-name">Test Company 3</h3>
                    </div>
                    <div class="company-stats">
                        <div class="company-problem-count">30 problems</div>
                    </div>
                </div>

                <div class="company-card" role="button" tabindex="0" aria-label="Test Company 4">
                    <div class="company-header">
                        <div class="company-logo">TC</div>
                        <h3 class="company-name">Test Company 4</h3>
                    </div>
                    <div class="company-stats">
                        <div class="company-problem-count">90 problems</div>
                    </div>
                </div>

                <div class="company-card" role="button" tabindex="0" aria-label="Test Company 5">
                    <div class="company-header">
                        <div class="company-logo">TC</div>
                        <h3 class="company-name">Test Company 5</h3>
                    </div>
                    <div class="company-stats">
                        <div class="company-problem-count">60 problems</div>
                    </div>
                </div>

                <div class="company-card" role="button" tabindex="0" aria-label="Test Company 6">
                    <div class="company-header">
                        <div class="company-logo">TC</div>
                        <h3 class="company-name">Test Company 6</h3>
                    </div>
                    <div class="company-stats">
                        <div class="company-problem-count">45 problems</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Problem Cards Test -->
        <section class="test-section">
            <h2 class="test-title">4. Problem Cards Test</h2>
            <p>Test problem cards with different states:</p>

            <div class="problems-grid" role="grid" aria-label="Test problems grid"
                style="grid-template-columns: repeat(2, 1fr);">
                <div class="problem-card" role="button" tabindex="0" aria-label="Two Sum - Easy difficulty, solved">
                    <div class="problem-header">
                        <h4 class="problem-title">Two Sum</h4>
                        <span class="difficulty-badge easy">Easy</span>
                    </div>
                    <div class="problem-topics">
                        <span class="topic-tag">Array</span>
                        <span class="topic-tag">Hash Table</span>
                    </div>
                    <div class="problem-meta">
                        <span class="problem-frequency">Frequency: 95%</span>
                        <span class="problem-acceptance">Acceptance: 55%</span>
                    </div>
                </div>

                <div class="problem-card solved" role="button" tabindex="0"
                    aria-label="Add Two Numbers - Medium difficulty, solved">
                    <div class="problem-header">
                        <h4 class="problem-title">Add Two Numbers</h4>
                        <span class="difficulty-badge medium">Medium</span>
                    </div>
                    <div class="problem-topics">
                        <span class="topic-tag">Linked List</span>
                        <span class="topic-tag">Math</span>
                    </div>
                    <div class="problem-meta">
                        <span class="problem-frequency">Frequency: 85%</span>
                        <span class="problem-acceptance">Acceptance: 38%</span>
                    </div>
                </div>

                <div class="problem-card bookmarked" role="button" tabindex="0"
                    aria-label="Median of Two Sorted Arrays - Hard difficulty, bookmarked">
                    <div class="problem-header">
                        <h4 class="problem-title">Median of Two Sorted Arrays</h4>
                        <span class="difficulty-badge hard">Hard</span>
                    </div>
                    <div class="problem-topics">
                        <span class="topic-tag">Array</span>
                        <span class="topic-tag">Binary Search</span>
                    </div>
                    <div class="problem-meta">
                        <span class="problem-frequency">Frequency: 70%</span>
                        <span class="problem-acceptance">Acceptance: 35%</span>
                    </div>
                </div>

                <div class="problem-card solved bookmarked" role="button" tabindex="0"
                    aria-label="Longest Palindromic Substring - Medium difficulty, solved and bookmarked">
                    <div class="problem-header">
                        <h4 class="problem-title">Longest Palindromic Substring</h4>
                        <span class="difficulty-badge medium">Medium</span>
                    </div>
                    <div class="problem-topics">
                        <span class="topic-tag">String</span>
                        <span class="topic-tag">Dynamic Programming</span>
                    </div>
                    <div class="problem-meta">
                        <span class="problem-frequency">Frequency: 80%</span>
                        <span class="problem-acceptance">Acceptance: 32%</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ARIA and Screen Reader Test -->
        <section class="test-section">
            <h2 class="test-title">5. ARIA and Screen Reader Test</h2>
            <p>Elements with proper ARIA attributes:</p>

            <div class="filter-controls">
                <div class="filter-group">
                    <label class="filter-label">Difficulty:</label>
                    <div class="filter-buttons" role="group" aria-label="Filter by difficulty">
                        <button class="filter-btn active" data-filter="all" aria-pressed="true"
                            aria-label="Show all problems">All <span class="filter-count">(150)</span></button>
                        <button class="filter-btn" data-filter="easy" aria-pressed="false"
                            aria-label="Show easy problems only">Easy <span class="filter-count">(50)</span></button>
                        <button class="filter-btn" data-filter="medium" aria-pressed="false"
                            aria-label="Show medium problems only">Medium <span
                                class="filter-count">(75)</span></button>
                        <button class="filter-btn" data-filter="hard" aria-pressed="false"
                            aria-label="Show hard problems only">Hard <span class="filter-count">(25)</span></button>
                    </div>
                </div>
            </div>

            <!-- Live Region Test -->
            <div style="margin: 1rem 0;">
                <button id="announce-test" class="btn btn-primary">Test Screen Reader Announcement</button>
                <p><em>This button will announce a message to screen readers when clicked.</em></p>
            </div>
        </section>

        <!-- Color Contrast Test -->
        <section class="test-section">
            <h2 class="test-title">6. Color Contrast Test</h2>
            <p>Testing WCAG AA compliance (4.5:1 ratio minimum):</p>

            <div class="contrast-test">
                <div class="contrast-sample" style="background-color: var(--primary-color); color: white;">
                    Primary Button
                    <span class="status-indicator status-pass" title="Passes WCAG AA"></span>
                </div>

                <div class="contrast-sample" style="background-color: var(--success-color); color: white;">
                    Success State
                    <span class="status-indicator status-pass" title="Passes WCAG AA"></span>
                </div>

                <div class="contrast-sample" style="background-color: var(--warning-color); color: white;">
                    Warning State
                    <span class="status-indicator status-pass" title="Passes WCAG AA"></span>
                </div>

                <div class="contrast-sample" style="background-color: var(--error-color); color: white;">
                    Error State
                    <span class="status-indicator status-pass" title="Passes WCAG AA"></span>
                </div>

                <div class="contrast-sample"
                    style="background-color: var(--background-color); color: var(--text-primary); border: 1px solid var(--border-color);">
                    Primary Text
                    <span class="status-indicator status-pass" title="Passes WCAG AA"></span>
                </div>

                <div class="contrast-sample"
                    style="background-color: var(--background-color); color: var(--text-secondary); border: 1px solid var(--border-color);">
                    Secondary Text
                    <span class="status-indicator status-pass" title="Passes WCAG AA"></span>
                </div>
            </div>

            <button id="run-contrast-test" class="btn btn-secondary">Run Full Contrast Analysis</button>
            <div id="contrast-results" style="margin-top: 1rem;"></div>
        </section>

        <!-- Accessibility Status -->
        <section class="test-section">
            <h2 class="test-title">7. Accessibility Status</h2>
            <div id="accessibility-status">
                <p>Loading accessibility status...</p>
            </div>

            <div style="margin-top: 1rem;">
                <button id="toggle-accessibility-mode" class="btn btn-secondary">Toggle Accessibility Mode</button>
                <button id="show-keyboard-help" class="btn btn-secondary">Show Keyboard Help</button>
            </div>
        </section>
    </div>

    <!-- JavaScript Files -->
    <script src="js/utils.js"></script>
    <script src="js/accessibility.js"></script>
    <script src="js/colorContrast.js"></script>

    <script>
        // Initialize accessibility features
        let accessibilityManager;
        let colorContrastValidator;

        document.addEventListener('DOMContentLoaded', () => {
            // Initialize managers
            accessibilityManager = new AccessibilityManager();
            colorContrastValidator = new ColorContrastValidator();

            // Make globally available for testing
            window.accessibilityManager = accessibilityManager;
            window.colorContrastValidator = colorContrastValidator;

            // Set up test interactions
            setupTestInteractions();

            // Update accessibility status
            updateAccessibilityStatus();

            console.log('✅ Accessibility test page initialized');
        });

        function setupTestInteractions() {
            // Theme toggle
            const themeToggle = document.querySelector('.theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('click', () => {
                    const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
                    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                    document.documentElement.setAttribute('data-theme', newTheme);

                    // Update theme toggle icons
                    const lightIcon = themeToggle.querySelector('.theme-icon-light');
                    const darkIcon = themeToggle.querySelector('.theme-icon-dark');

                    if (newTheme === 'dark') {
                        if (lightIcon) lightIcon.style.display = 'none';
                        if (darkIcon) darkIcon.style.display = 'block';
                        themeToggle.setAttribute('aria-label', 'Switch to light theme');
                    } else {
                        if (lightIcon) lightIcon.style.display = 'block';
                        if (darkIcon) darkIcon.style.display = 'none';
                        themeToggle.setAttribute('aria-label', 'Switch to dark theme');
                    }

                    // Re-run contrast validation
                    setTimeout(() => {
                        if (colorContrastValidator) {
                            colorContrastValidator.validateAllColors();
                        }
                    }, 100);
                });
            }

            // Search functionality
            const searchInput = document.getElementById('search-input');
            const searchClear = document.querySelector('.search-clear');

            if (searchInput && searchClear) {
                searchInput.addEventListener('input', (e) => {
                    const query = e.target.value.trim();
                    searchClear.style.display = query ? 'block' : 'none';
                });

                searchClear.addEventListener('click', () => {
                    searchInput.value = '';
                    searchClear.style.display = 'none';
                    searchInput.focus();
                });
            }

            // Filter buttons
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Remove active from all buttons
                    filterButtons.forEach(btn => {
                        btn.classList.remove('active');
                        btn.setAttribute('aria-pressed', 'false');
                    });

                    // Set active on clicked button
                    button.classList.add('active');
                    button.setAttribute('aria-pressed', 'true');

                    // Announce change
                    if (accessibilityManager) {
                        const filterText = button.textContent.trim();
                        accessibilityManager.announceToScreenReader(`Filter changed to ${filterText}`);
                    }
                });
            });

            // Company and problem cards
            const cards = document.querySelectorAll('.company-card, .problem-card');
            cards.forEach(card => {
                card.addEventListener('click', () => {
                    if (accessibilityManager) {
                        const cardTitle = card.querySelector('.company-name, .problem-title')?.textContent || 'Card';
                        accessibilityManager.announceToScreenReader(`${cardTitle} selected`);
                    }
                });
            });

            // Test buttons
            const announceTest = document.getElementById('announce-test');
            if (announceTest) {
                announceTest.addEventListener('click', () => {
                    if (accessibilityManager) {
                        accessibilityManager.announceToScreenReader('This is a test announcement for screen readers!', 'assertive');
                    }
                });
            }

            const contrastTest = document.getElementById('run-contrast-test');
            if (contrastTest) {
                contrastTest.addEventListener('click', runContrastAnalysis);
            }

            const toggleAccessibilityMode = document.getElementById('toggle-accessibility-mode');
            if (toggleAccessibilityMode) {
                toggleAccessibilityMode.addEventListener('click', () => {
                    if (accessibilityManager) {
                        accessibilityManager.toggleAccessibilityMode();
                        updateAccessibilityStatus();
                    }
                });
            }

            const showKeyboardHelp = document.getElementById('show-keyboard-help');
            if (showKeyboardHelp) {
                showKeyboardHelp.addEventListener('click', () => {
                    if (accessibilityManager) {
                        accessibilityManager.showKeyboardHelp();
                    }
                });
            }
        }

        function updateAccessibilityStatus() {
            const statusElement = document.getElementById('accessibility-status');
            if (!statusElement || !accessibilityManager) return;

            const status = accessibilityManager.getAccessibilityStatus();

            statusElement.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <div class="test-item">
                        <strong>Focusable Elements:</strong><br>
                        ${status.focusableElements}
                    </div>
                    <div class="test-item">
                        <strong>Current Focus:</strong><br>
                        ${status.currentFocus}
                    </div>
                    <div class="test-item">
                        <strong>Keyboard Navigation:</strong><br>
                        ${status.keyboardNavigation ? '✅ Active' : '❌ Inactive'}
                    </div>
                    <div class="test-item">
                        <strong>Accessibility Mode:</strong><br>
                        ${status.accessibilityMode ? '✅ Enabled' : '❌ Disabled'}
                    </div>
                </div>
            `;
        }

        function runContrastAnalysis() {
            if (!colorContrastValidator) return;

            const results = colorContrastValidator.getValidationReport();
            const resultsElement = document.getElementById('contrast-results');

            if (resultsElement) {
                let html = '<h4>Contrast Analysis Results:</h4>';

                if (results.passed.length > 0) {
                    html += `<p><strong>✅ Passed (${results.passed.length}):</strong></p><ul>`;
                    results.passed.forEach(result => {
                        html += `<li>${result.name}: ${result.ratio.toFixed(2)}:1</li>`;
                    });
                    html += '</ul>';
                }

                if (results.failed.length > 0) {
                    html += `<p><strong>❌ Failed (${results.failed.length}):</strong></p><ul>`;
                    results.failed.forEach(result => {
                        html += `<li>${result.name}: ${result.ratio.toFixed(2)}:1 (needs ${result.required}:1)</li>`;
                    });
                    html += '</ul>';
                }

                resultsElement.innerHTML = html;
            }
        }

        // Update status periodically
        setInterval(updateAccessibilityStatus, 2000);
    </script>
</body>

</html>